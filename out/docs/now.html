<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/kognise/water.css@latest/dist/light.min.css">
    <script type="application/javascript" src="./playground.js"></script>
    <script type="application/javascript" src="./mermaid.js"></script>
    <script type="application/javascript" src="./prism.js"></script>
    <link rel="stylesheet" type="text/css" href="./prism.css">
    <script>mermaid.initialize({startOnLoad:true,flowchart:{useMaxWidth:false}});</script>
    <script>
      Temporal = { ...temporal.Temporal };
      Object.assign(Intl, temporal.Intl);
    </script>
    <style>
      /* https://github.com/kognise/water.css/blob/master/src/variables-light.css */
      :root {
        --background: #efefef;
        --text-muted: #999999;
        --text-bright: #000000;
        --text-width: 900px;
        --variable: #39a33c;
      }
      .mermaid svg { height: 13em; }
      body {
        font-size: 18px;
        max-width: var(--text-width);
        padding-top: 40px;  /* extra padding for banner */
      }
      pre { border-left: 4px solid var(--variable); }
      pre code[class*="language-"] { font-size: 0.85em; }
      pre[class*="language-"] { padding: 0.5em; }
      h2 { border-bottom: 2px solid var(--text-muted); margin-top: 2em; }
      h3 {
        border-bottom: 1px solid var(--text-muted);
        color: var(--text-muted);
        font-weight: normal;
      }
      h3 em { font-weight: bold; }
      h3 strong { color: var(--text-bright); }
      :not(h2) + h3 { margin-top: 2em; }
      footer {
        border-top: 1px solid var(--background);
        color: var(--text-muted);
        font-size: 0.8em;
        margin-top: 2em;
        padding-top: 10px;
      }
      .heading-link {
        left: calc((100vw - var(--text-width)) / 2 - 1.5em);
        opacity: 0;
        position: absolute;
        transition: opacity 150ms;
      }
      .heading-link:hover { text-decoration: none; }
      .heading-link::before { content: 'Â¶'; }
      h3:hover .heading-link { opacity: 1; }
      .banner {
        /* Gradient from https://joshnh.com/weblog/how-to-make-an-alert-bar/ */
        background-color: #fce94f;
        background-image: linear-gradient(135deg,
                                          transparent,
                                          transparent 25%,
                                          rgba(0, 0, 0, .05) 25%,
                                          rgba(0, 0, 0, .05) 50%,
                                          transparent 50%,
                                          transparent 75%,
                                          rgba(0, 0, 0, .05) 75%,
                                          rgba(0, 0, 0, .05));
        background-size: 20px 20px;
        box-shadow: 0 5px 0 rgba(0, 0, 0, .1);
        left: 0;
        padding: 0.4em 0;
        position: absolute;
        text-align: center;
        top: 0;
        width: 100vw;
      }
    </style>
  </head>
  <body>
    <div class="banner">
      <strong>This polyfill is a work in progress.</strong>
      It does not represent the final API of this proposal, nor even the current consensus.
    </div>
<h1 id="temporalnow"><code>Temporal.now</code></h1>
<p>The <code>Temporal.now</code> object has several methods which give information about the current time and date.</p>
<h2 id="methods">Methods</h2>
<h3 id="temporalnowabsolute--temporalabsolute">Temporal.now.<strong>absolute</strong>() : Temporal.Absolute</h3>
<p><strong>Returns:</strong> a <code>Temporal.Absolute</code> object representing the current system time.</p>
<p>This method gets the current absolute system time, without regard to calendar or time zone.
This is a good way to get a timestamp for an event, for example.
It works like the old-style JavaScript <code>Date.now()</code>, but with nanosecond accuracy instead of milliseconds.</p>
<p>Example usage:</p>
<pre><code class="language-js">function timeit(func) {
    start = Temporal.now.absolute();
    try {
        return func();
    } finally {
        end = Temporal.now.absolute();
        console.log(`The function took ${end.difference(start)}`);
    }
}
timeit(() =&gt; JSON.parse(someData));
// example output:
// The function took PT0.001031756S</code></pre>
<h3 id="temporalnowtimezone--temporaltimezone">Temporal.now.<strong>timeZone</strong>() : Temporal.TimeZone</h3>
<p><strong>Returns:</strong> a <code>Temporal.TimeZone</code> object representing the time zone according to the current system settings.</p>
<p>This method gets the current system time zone.
This will usually be a named <a href="https://www.iana.org/time-zones">IANA time zone</a>, as that is how most people configure their computers.</p>
<p>Example usage:</p>
<pre><code class="language-js">// When is the next daylight saving change from now, in the current location?
tz = Temporal.now.timeZone();
now = Temporal.now.absolute();
[nextTransition] = tz.getTransitions(now);
before = tz.getOffsetFor(nextTransition.minus({nanoseconds: 1}));
after = tz.getOffsetFor(nextTransition.plus({nanoseconds: 1}));
console.log(`On ${nextTransition.inTimeZone(tz)} the clock will change from UTC ${before} to ${after}`);
nextTransition.inTimeZone(tz);
// example output:
// On 2020-03-08T03:00 the clock will change from UTC -08:00 to -07:00</code></pre>
<h3 id="temporalnowdatetimetimezone-temporaltimezone--string--temporalnowtimezone--temporaldatetime">Temporal.now.<strong>dateTime</strong>(<em>timeZone</em>: Temporal.TimeZone | string = Temporal.now.timeZone()) : Temporal.DateTime</h3>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>timeZone</code> (optional <code>Temporal.TimeZone</code> or string): The time zone to get the current date and time in.
If not given, the current system time zone will be used.</li>
</ul>
<p><strong>Returns:</strong> a <code>Temporal.DateTime</code> object representing the current system date and time.</p>
<p>This method gets the current calendar date and wall-clock time according to the system settings.
Optionally a time zone can be given in which the time is computed.</p>
<p>Example usage:</p>
<pre><code class="language-js">financialCentres = {
    &#39;New York&#39;: &#39;America/New_York&#39;,
    &#39;London&#39;: &#39;Europe/London&#39;,
    &#39;Tokyo&#39;: &#39;Asia/Tokyo&#39;,
};
console.log(`Here: ${Temporal.now.dateTime()}`);
Object.entries(financialCentres).forEach(([name, timeZone]) =&gt; {
    console.log(`${name}: ${Temporal.now.dateTime(timeZone)}`);
});
// example output:
// Here: 2020-01-24T21:51:02.142905166
// New York: 2020-01-25T00:52:14.756462142
// London: 2020-01-25T05:52:14.758534756
// Tokyo: 2020-01-25T14:52:14.759534758</code></pre>
<h3 id="temporalnowdatetimezone-temporaltimezone--string--temporalnowtimezone--temporaldate">Temporal.now.<strong>date</strong>(<em>timeZone</em>: Temporal.TimeZone | string = Temporal.now.timeZone()) : Temporal.Date</h3>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>timeZone</code> (optional <code>Temporal.TimeZone</code> or string): The time zone to get the current date and time in.
If not given, the current system time zone will be used.</li>
</ul>
<p><strong>Returns:</strong> a <code>Temporal.Date</code> object representing the current system date.</p>
<p>Example usage:</p>
<pre><code class="language-js">// Is it Leap Day?
date = Temporal.now.date();
if (date.month === 2 &amp;&amp; date.day === 29) console.log(&#39;Leap Day!&#39;);</code></pre>
<h3 id="temporalnowtimetimezone-temporaltimezone--string--temporalnowtimezone--temporaltime">Temporal.now.<strong>time</strong>(<em>timeZone</em>: Temporal.TimeZone | string = Temporal.now.timeZone()) : Temporal.Time</h3>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>timeZone</code> (optional <code>Temporal.TimeZone</code> or string): The time zone to get the current date and time in.
If not given, the current system time zone will be used.</li>
</ul>
<p><strong>Returns:</strong> a <code>Temporal.Time</code> object representing the current system time.</p>
<p>This method gets the current wall-clock time according to the system settings.
Optionally a time zone can be given in which the time is computed.</p>
<p>Example usage:</p>
<pre><code class="language-js">// Is it lunchtime?
time = Temporal.now.time();
if (time.hour === 12) console.log(&#39;Lunchtime!&#39;);</code></pre>
    <footer>
      <p>
        This page includes a script which loads an implementation of Temporal in your browser.
        You can open a console in your browser's developer tools and try it out directly!
      </p>
      <p>View this or help contribute on <a href="https://github.com/tc39/proposal-temporal">GitHub</a>.</p>
    </footer>
    <script>
      // Add permalinks to all <h3> elements (function documentation headings)
      const h3s = document.getElementsByTagName('h3');
      for (let h3 of h3s) {
        const anchor = document.createElement('a');
        anchor.className = 'heading-link';

        // Use the **function name** as the link ID, otherwise fall back to the
        // ID generated by markdown
        let id = h3.getAttribute('id');
        const bold = h3.getElementsByTagName('strong');
        if (bold[0]) {
          id = bold[0].textContent.replace(/[^a-zA-Z]/g, '-');
          h3.setAttribute('id', id);
        }

        anchor.setAttribute('href', `#${id}`);
        h3.prepend(anchor);
      };
    </script>
  </body>
</html>
